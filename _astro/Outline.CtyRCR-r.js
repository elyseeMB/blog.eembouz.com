import{d as f,A as g,y as u}from"./hooks.module.DgMOKmnS.js";import{b as w}from"./helper.CqR5Z8Km.js";import{u as p}from"./jsxRuntime.module.BSCWCfwz.js";import"./preact.module.IsPPbktY.js";class v{constructor(t){if(this.item=t,!t||(this.children=Array.from(t.children),this.children.length===0))return;const s=this.item?.parentElement;this.wrapper=document.createElement("div"),this.wrapper.setAttribute("class","bg-secondary absolute rounded-md"),this.wrapper.style.opacity="0",this.wrapper.style.pointerEvents="none",s?.prepend(this.wrapper),s?.addEventListener("mouseleave",()=>{this.wrapper.style.opacity="0"}),this.itemSizes=new Map(this.children.map((o,r)=>[r,o])),this.children.forEach((o,r)=>{o.addEventListener("mouseenter",n=>this.handleMouseenter(n,r))})}itemSizes;children;wrapper;handleMouseenter=(t,s)=>{const o=t.currentTarget.firstElementChild,r=t.currentTarget,n=r.getBoundingClientRect(),e=(t.clientX-n.left-n.width/2)/(n.width/2),a=(t.clientY-n.top-n.height/2)/(n.height/2),l=e,i=a,c=0,h=1+Math.abs(e)*.1,d=1+Math.abs(a)*.05;this.wrapper.setAttribute("style",`left: ${r.offsetLeft}px;
        top: ${this.itemSizes.get(s)?.offsetTop||0}px;
        width: ${o.offsetWidth}px;
        height: ${r.offsetHeight}px;
        transform: translate3d(${l}px, ${i}px, ${c}px) scale(${h}, ${d});
        transform-origin: 50% 50% 0px;
        z-index: -1;
        opacity: 1;
        transition: all 0.25s ease;`)}}function A(){const[m,t]=f(null),[s,o]=f({}),r=g(null);u(()=>{const e=Array.from(document.querySelectorAll("h2")),a=Array.from(document.querySelectorAll("h3"));o(i=>({...i,heading_level_2:e,heading_level_3:a}));const l=[];return e.forEach(i=>{const c=new IntersectionObserver(h=>{const d=h[0];d.isIntersecting&&t(d.target)},{rootMargin:"-10px 0px -90% 0px"});c.observe(i),l.push(c)}),()=>{l.forEach(i=>{i.disconnect()})}},[]),u(()=>{s&&new v(r.current)},[s]);const n=e=>{e.preventDefault();const l=e.currentTarget.firstElementChild.getAttribute("href")?.replace("#","");if(l){const i=document.getElementById(l);if(i){const c=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c-50,behavior:"smooth"})}}};return p("div",{className:"relative outline__wrapper w-max animate-fade-in  animation-delay-200",children:p("ul",{ref:r,id:"chapiter-animation",className:"",children:s.heading_level_2?.map((e,a)=>p("li",{onClick:n,className:`px-2 py-2 flex items-center cursor-pointer animate-slide-in animation-delay-${w(a*100,0,300)}`,children:p("a",{class:"relative inline-block pr-4 text-neutral-500!",href:"#"+e.id,children:p("div",{style:{color:m?.id===e.id?"var(--color-primary)":"inherit"},class:"block max-w-[200px] overflow-hidden text-ellipsis transition",children:e.textContent?.replace(/[^\p{L}\p{N}\s]/gu,"").trim()})},e.id)}))})})}export{A as Outline};
