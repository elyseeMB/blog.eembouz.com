import{d as m,A as w,y as u}from"./hooks.module.B0mXzcQ8.js";import{u as h}from"./jsxRuntime.module.p29htrkg.js";import"./preact.module.C6Le_Vmu.js";class v{constructor(t){if(this.item=t,!t||(this.children=Array.from(t.children),this.children.length===0))return;const n=this.item?.parentElement;this.wrapper=document.createElement("div"),this.wrapper.setAttribute("class","bg-secondary absolute rounded-md"),this.wrapper.style.opacity="0",this.wrapper.style.pointerEvents="none",n?.prepend(this.wrapper),n?.addEventListener("mouseleave",()=>{this.wrapper.style.opacity="0"}),this.itemSize=this.children[0].offsetHeight,this.children.forEach((l,i)=>{l.addEventListener("mouseenter",c=>this.handleMouseenter(c,i))})}itemSize;children;wrapper;handleMouseenter=(t,n)=>{const l=t.currentTarget.firstElementChild,i=t.currentTarget,c=n*this.itemSize,e=i.getBoundingClientRect(),a=(t.clientX-e.left-e.width/2)/(e.width/2),s=(t.clientY-e.top-e.height/2)/(e.height/2),r=a,o=s,p=0,d=1+Math.abs(a)*.1,g=1+Math.abs(s)*.05;this.wrapper.setAttribute("style",`left: ${i.offsetLeft}px;
        top: ${c}px;
        width: ${l.offsetWidth}px;
        height: ${i.offsetHeight}px;
        transform: translate3d(${r}px, ${o}px, ${p}px) scale(${d}, ${g});
        transform-origin: 50% 50% 0px;
        z-index: -1;
        opacity: 1;
        transition: all 0.2s ease;`)}}function E(){const[f,t]=m(null),[n,l]=m({}),i=w(null);u(()=>{const e=Array.from(document.querySelectorAll("h2")),a=Array.from(document.querySelectorAll("h3"));l(r=>({...r,heading_level_2:e,heading_level_3:a}));const s=[];return e.forEach(r=>{const o=new IntersectionObserver(p=>{const d=p[0];d.isIntersecting&&t(d.target)},{rootMargin:"-10px 0px -90% 0px"});o.observe(r),s.push(o)}),()=>{s.forEach(r=>{r.disconnect()})}},[]),u(()=>{n&&new v(i.current)},[n]);const c=e=>{e.preventDefault();const s=e.currentTarget.firstElementChild.getAttribute("href")?.replace("#","");if(s){const r=document.getElementById(s);if(r){const o=r.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:o-50,behavior:"smooth"})}}};return h("div",{className:"relative  outline__wrapper w-max",children:h("ul",{ref:i,id:"chapiter-animation",className:"px-10",children:n.heading_level_2?.map(e=>h("li",{onClick:c,className:"px-2 py-2 flex items-center cursor-pointer",children:h("a",{class:"relative inline-block pr-4 text-gray-200/50!",href:"#"+e.id,children:h("div",{style:{color:f?.id===e.id?"var(--color-primary)":"inherit"},class:"block whitespace-nowrap max-w-[250px] overflow-hidden text-ellipsis transition",children:e.textContent})},e.id)}))})})}export{E as Outline};
